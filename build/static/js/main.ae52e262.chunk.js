(this["webpackJsonpakshay.flappy-bird-screenapp"]=this["webpackJsonpakshay.flappy-bird-screenapp"]||[]).push([[0],{21:function(t,e,i){t.exports=i(38)},26:function(t,e,i){},28:function(t){t.exports=JSON.parse('{"general":{"appId":"614b140eba044e0006209f10","appName":"flappy-bird-signage","appDisplayName":"Flappy Bird Signage","provider":"app-container","type":"gdm","release":"GridApp v2.90.2","defaultLanguage":"","supportedLanguages":[],"organizationId":"6118d08774067d0006337d02","organizationName":"1-terapi"},"notifications":{"org_id":"1-terapi","endpoint":"https://push.ombori.com"},"app":{"gridApp":{"valid":true,"url":"https://gridapps.blob.core.windows.net/apps/614af835ba044e00062086cf/31527960-1bb2-11ec-83e9-7b3965ca8ff8","name":"1-terapi.flappy-bird-screenapp-0.1.7.gridapp","id":"614b3ef62187a700066ed3e1","type":"application/x-gridapp","ref":"media","iconUrl":"https://gridapps.blob.core.windows.net/apps/614af835ba044e00062086cf%2F31527960-1bb2-11ec-83e9-7b3965ca8ff8.png","gridapp":{"id":"614af835ba044e00062086cf","buildId":"614b3ef62187a700066ed3e1"},"settings":{"remote":{"prod":{"isManualInput":false,"spaces":[],"__type":"MobileEndpoint","_id":"614afa7aba044e0006208a63","appId":"614afa7aba044e0006208a62","organizationId":"6118d08774067d0006337d02","urlId":"flappy-remote","displayName":"Default prod","notes":"","env":"prod","createdAt":"2021-09-22T09:42:18.965Z","updatedAt":"2021-09-22T09:42:18.965Z","__v":0,"id":"614afa7aba044e0006208a63","url":"https://pwa.omborigrid.com/flappy-remote/"}},"gravity":2,"gap":100,"thrust":10},"filename":"614b3ef62187a700066ed3e1.tar.gz","path":"/grid-settings/614b3ef62187a700066ed3e1"}}}')},38:function(t,e,i){"use strict";i.r(e);var a=i(0),s=i.n(a),r=i(14),n=i.n(r),p=(i(26),i(2)),h=i(20),o=i(15),d=i(1),c=i(16),l=i.n(c),g=i(3),u=function(){},f=function(){},m=.125,y=85,b=3.6,w=Math.PI/180,v=0,x={curr:0,getReady:0,Play:1,gameOver:2},I={start:new Audio,flap:new Audio,score:new Audio,hit:new Audio,die:new Audio,played:!1},O={sprite:new Image,x:0,y:0,draw:function(t,e){this.y=e.height-this.sprite.height,null===t||void 0===t||t.drawImage(this.sprite,this.x,this.y)},update:function(){x.curr===x.Play&&(this.x-=2,this.x=this.x%(this.sprite.width/2))}},R={sprite:new Image,x:0,y:0,draw:function(t,e){this.y=e.height-this.sprite.height,null===t||void 0===t||t.drawImage(this.sprite,this.x,this.y)}},j={top:{sprite:new Image},bot:{sprite:new Image},moved:!0,pipes:[],draw:function(t,e){for(var i=0;i<this.pipes.length;i++){var a=this.pipes[i];null===t||void 0===t||t.drawImage(this.top.sprite,a.x,a.y),null===t||void 0===t||t.drawImage(this.bot.sprite,a.x,a.y+this.top.sprite.height+y)}},update:function(t){x.curr===x.Play&&(v%100===0&&this.pipes.push({x:t.width,y:-210*Math.min(Math.random()+1,1.8)}),this.pipes.forEach((function(t){t.x-=2})),this.pipes.length&&this.pipes[0].x<-this.top.sprite.width&&(this.pipes.shift(),this.moved=!0))}},k={animations:[{sprite:new Image},{sprite:new Image},{sprite:new Image},{sprite:new Image}],rotatation:0,x:50,y:100,speed:0,frame:0,draw:function(t,e){var i=this.animations[this.frame].sprite.height,a=this.animations[this.frame].sprite.width;null===t||void 0===t||t.save(),null===t||void 0===t||t.translate(this.x,this.y),null===t||void 0===t||t.rotate(this.rotatation*w),null===t||void 0===t||t.drawImage(this.animations[this.frame].sprite,-a/2,-i/2),null===t||void 0===t||t.restore()},update:function(){var t=this.animations[0].sprite.width/2;switch(x.curr){case x.getReady:this.rotatation=0,this.y+=v%10===0?Math.sin(v*w):0,this.frame+=v%10===0?1:0;break;case x.Play:this.frame+=v%5===0?1:0,this.y+=this.speed,this.setRotation(),this.speed+=m,(this.y+t>=O.y||this.collisioned())&&(x.curr=x.gameOver,f());break;case x.gameOver:this.frame=1,this.y+t<O.y?(this.y+=this.speed,this.setRotation(),this.speed+=2*m):(this.speed=0,this.y=O.y-t,this.rotatation=90,I.played||(I.die.play(),I.played=!0))}this.frame=this.frame%this.animations.length},flap:function(){this.y>0&&(I.flap.play(),this.speed=-b)},setRotation:function(){this.speed<=0?this.rotatation=Math.max(-25,-25*this.speed/(-1*b)):this.speed>0&&(this.rotatation=Math.min(90,90*this.speed/(2*b)))},collisioned:function(){if(j.pipes.length){var t=this.animations[0].sprite,e=j.pipes[0].x,i=j.pipes[0].y,a=t.height/4+t.width/4,s=i+j.top.sprite.height,r=s+y,n=j.top.sprite.width;if(this.x+a>=e)if(this.x+a<e+n){if(this.y-a<=s||this.y+a>=r)return I.hit.play(),!0}else j.moved&&(E.score.curr++,I.score.play(),j.moved=!1)}}},E={getReady:{sprite:new Image},gameOver:{sprite:new Image},tap:[{sprite:new Image},{sprite:new Image}],score:{curr:0,best:0},x:0,y:0,tx:0,ty:0,frame:0,draw:function(t,e){switch(x.curr){case x.getReady:this.y=(e.height-this.getReady.sprite.height)/2,this.x=(e.width-this.getReady.sprite.width)/2,this.tx=(e.width-this.tap[0].sprite.width)/2,this.ty=this.y+this.getReady.sprite.height-this.tap[0].sprite.height,null===t||void 0===t||t.drawImage(this.getReady.sprite,this.x,this.y),null===t||void 0===t||t.drawImage(this.tap[this.frame].sprite,this.tx,this.ty);break;case x.gameOver:this.y=(e.height-this.gameOver.sprite.height)/2,this.x=(e.width-this.gameOver.sprite.width)/2,this.tx=(e.width-this.tap[0].sprite.width)/2,this.ty=this.y+this.gameOver.sprite.height-this.tap[0].sprite.height,null===t||void 0===t||t.drawImage(this.gameOver.sprite,this.x,this.y),null===t||void 0===t||t.drawImage(this.tap[this.frame].sprite,this.tx,this.ty)}this.drawScore(t,e)},drawScore:function(t,e){if(t)switch(t.fillStyle="#FFFFFF",t.strokeStyle="#000000",x.curr){case x.Play:t.lineWidth=2,t.font="bold 35px Tahoma",null===t||void 0===t||t.fillText(""+this.score.curr,e.width/2-5,50),null===t||void 0===t||t.strokeText(""+this.score.curr,e.width/2-5,50);break;case x.gameOver:t.lineWidth=2,t.font="bold 32px Tahoma";var i="SCORE : ".concat(this.score.curr);try{this.score.best=Math.max(this.score.curr,parseInt(localStorage.getItem("best")||"0",10)),localStorage.setItem("best",""+this.score.best);var a="BEST  : ".concat(this.score.best);null===t||void 0===t||t.fillText(i,e.width/2-80,e.height/2+0),null===t||void 0===t||t.strokeText(i,e.width/2-80,e.height/2+0),null===t||void 0===t||t.fillText(a,e.width/2-80,e.height/2+30),null===t||void 0===t||t.strokeText(a,e.width/2-80,e.height/2+30)}catch(s){null===t||void 0===t||t.fillText(i,e.width/2-85,e.height/2+15),null===t||void 0===t||t.strokeText(i,e.width/2-85,e.height/2+15)}}},update:function(){x.curr!==x.Play&&(this.frame+=v%10===0?1:0,this.frame=this.frame%this.tap.length)}};O.sprite.src="img/ground.png",R.sprite.src="img/BG.png",j.top.sprite.src="img/toppipe.png",j.bot.sprite.src="img/botpipe.png",E.gameOver.sprite.src="img/go.png",E.getReady.sprite.src="img/getready.png",E.tap[0].sprite.src="img/tap/t0.png",E.tap[1].sprite.src="img/tap/t1.png",k.animations[0].sprite.src="img/bird/b0.png",k.animations[1].sprite.src="img/bird/b1.png",k.animations[2].sprite.src="img/bird/b2.png",k.animations[3].sprite.src="img/bird/b0.png",I.start.src="sfx/start.wav",I.flap.src="sfx/flap.wav",I.score.src="sfx/score.wav",I.hit.src="sfx/hit.wav",I.die.src="sfx/die.wav";var S,T,A,F,M=function(){switch(x.curr){case x.getReady:x.curr=x.Play,I.start.play();break;case x.Play:k.flap();break;case x.gameOver:u(),x.curr=x.getReady,k.speed=0,k.y=100,j.pipes=[],E.score.curr=0,I.played=!1}},P=function(){return M},_=function(t){var e=Object(a.useRef)(null);return Object(a.useEffect)((function(){e.current&&function(t){var e=t.getContext("2d");if(!e)throw new Error("Unable to get context");t.tabIndex=1,function i(){k.update(),O.update(),j.update(t),E.update(),e.fillStyle="#30c0df",e.fillRect(0,0,t.width,t.height),R.draw(e,t),j.draw(e,t),k.draw(e,t),O.draw(e,t),E.draw(e,t),v++,requestAnimationFrame(i)}()}(e.current)}),[]),Object(a.useEffect)((function(){m=.125*(t.gravity||1),y=t.gap||85,b=t.thrust||3.6}),[t.gravity,t.gap,t.thrust]),s.a.createElement("canvas",{ref:e,width:"276",height:"414"})},z=function(t,e){u=Object(a.useCallback)(t,e)},C=function(t,e){f=Object(a.useCallback)(t,e)};Object(g.a)(l.a)(S||(S=Object(p.a)(["\n  height: 200px;\n  width: 200px;\n  padding: 40px;\n  background: #DED895;  \n  box-shadow: 10px 10px 0 #d7a84b;\n  border: 10px solid #503547;\n"])));var N=g.a.h1(T||(T=Object(p.a)(["\n  margin-top: 40px;\n  font-size: 3rem;\n  color: #503547;\n"]))),B=g.a.div(A||(A=Object(p.a)(["\n  position: absolute;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  width: 100vw;\n  padding-top: 10vh;\n  padding-left: 20vh;\n  \n"]))),D=g.a.div(F||(F=Object(p.a)(["\n  height: 100vh;\n  display: flex;\n"]))),G=function(){var t,e;Object(d.a)();var i=Object(o.useSettings)(),r=Object(a.useState)(0),n=Object(h.a)(r,2),p=n[0],c=n[1],l=P(),g=Object(d.c)(),u=Object(d.b)((null===i||void 0===i||null===(t=i.remote)||void 0===t||null===(e=t.prod)||void 0===e?void 0:e.url)||"");if(Object(d.d)("Remote.connected",(function(){return c((function(t){return t+1}))}),[c]),Object(d.d)("Remote.disconnected",(function(){return c((function(t){return t-1}))}),[c]),Object(d.d)("remote/Flap",(function(){return l()}),[l]),z((function(){return g("remote/Game.started",{})}),[g]),C((function(){return g("remote/Game.over",{})}),[g]),!i)return s.a.createElement("div",null,"Loading gridapp settings...");var f=i.gravity,m=i.gap,y=i.thrust;return s.a.createElement(D,{onClick:l},s.a.createElement(_,{gravity:f,gap:m,thrust:y}),u&&0===p&&s.a.createElement(B,null,s.a.createElement(N,null,"Scan the QR code to begin")))};n.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(G,null)),document.getElementById("root"))}},[[21,1,2]]]);